# 데이터베이스

## Index(인덱스)
 - Index는 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조
 - 데이터베이스의 Index는 책의 색인과 같음
 - 데이터베이스에서도 테이블의 모든 데이터를 검색하면 시간이 오래 걸리기 때문에 데이터와 데이터의 위치를 포함한 자료구조를 생성하여 빠르게 조회할 수 있도록 한다
 - 만약 Index를 적용하지 않은 컬럼을 조회시, 전체를 탐색하는 Full Scan이 수행
 - Full Scan은 전체를 비교하여 탐색하기 때문에 처리 속도가 떨어짐

## 인덱스의 자료구조
 - 해시 테이블
    1. 컬럼의 값으로 생성된 해시를 기반으로 인덱스를 구현
    2. 시간복잡도가 O(1)이라 검색이 매우 빠름
    3. 부등호(<, >)와 같은 연속적인 데이터를 위한 순차 검색이 불가능
 - B+Tree
    1. 자식 노드가 2개 이상인 B-Tree를 개선시킨 자료구조
    2. BTree의 리프노드들을 LinkedList로 연결하여 순차 검색이 용이
    3. 해시 테이블보다 나쁜 O(log2n)의 시간복잡도를 갖지만 해시테이블보다 흔하게 사용
<hr>

## DB 정규화
 - 제 1정규형 : 모든 속성 값이 원자 값을 갖도록 분해
 - 제 2정규형 : 제 1정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전 함수 종속이도록 분해 (완전 함수 종속이란 기본키의 부분집합이 다른 값을 결정하지 않는 것을 의미)
 - 제 3정규형 : 제 2정규형을 만족하고, 기본키가 아닌 속성이 기본키에 직접 종속(비이행적 종속)하도록 분해 (이행적 종속이란 A->B->C가 성립하는 것으로, 이를 A,B와 B,C로 분해하는 것이 제 3정규형)
 - BCNF 정규형 : 제 3정규형을 만족하고, 함수 종속성 X -> Y가 성립할 때 모든 결정자 X가 후보키가 되도록 분해
<img src="https://images.velog.io/images/bsjp400/post/140f510e-26ed-4807-a517-bc0b9a902c69/image.png">
<hr>

## Transaction(트랜잭션)
 - Transaction은 데이터베이스 작업의 단위로써 하나 이상의 쿼리를 처리할 때 동일한 Connection 객체를 공유하여 에러가 발생하는 경우 모든 과정을 되돌리기 위한 방법
<img src="https://images.velog.io/images/jinho0705/post/6a8ec4c2-329d-42e4-9bbf-122f59d4df12/transaction-status.png">
<hr>

## 트랜잭션 ACID
 - Atomicity(원자성) : 트랜잭션에 포함된 작업은 전부 수행되거나 전부 수행되지 않아야 한다.
 - Consistency(일관성) : 트랜잭션을 수행하기 전이나 후나 데이터베이스는 항상 일관된 상태를 유지해야 한다.
 - Isolation(고립성) : 수행 중인 트랜잭션에 다른 트랜잭션이 끼어들어 변경 중인 데이터 값을 훼손하지 않아야한다.
 - Durability(지속성) : 수행을 성공적으로 완료한 트랜잭션은 변경한 데이터를 영구히 저장해야 한다.
<hr>

## 이상 현상 종류
 - 삽입 이상 : 튜플 삽입 시 특정 속성에 해당하는 값이 없어 NULL을 입력해야하는 현상
 - 삭제 이상 : 튜플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
 - 수정 이상 : 튜플 수정 시 중복된 데이터의 일부만 수정되어 일어나는 데이터 불일치 현상
<hr>

## DB Lock의 종류
 - DB 락은 여러 개의 트랜잭션들이 하나의 데이터로 동시에 접근하려고 할 때 이를 제어하는 도구
 - Shared Lock(LS, 공유락) : 트랜잭션이 읽기를 할 때 사용하는 락, 데이터를 읽을 수 있지만 쓸 수 없음
 - Exclusive Lock(LX, 베타락) : 트랜잭션이 읽고 쓰기를 할 때 사용하는 락, 데이터를 읽고 쓸 수 있음
<hr>

## RDBMS vs NoSQL
 - RDBMS
    1. 2차원의 행과 열로 데이터의 관계를 관리하는 데이터베이스
    2. 장점 : 스키마에 맞추어 데이터를 관리하기 때문에 데이터의 정합성을 보장
    3. 단점 : 시스템이 커질수록 쿼리가 복잡해지고 성능이 저하되며, 수평적 확장이 어려움
 - NoSQL
    1. RDBMS가 비대해짐에 따라 관계가 복잡해져 이를 극복하기 위해 등장한 데이터베이스
    2. 장점 : NoSQL은 스키마 없이 Key-Value 형태로 데이터를 관리하여 좀 더 자유롭게 데이터를 관리
    3. 단점 : 중복된 데이터가 추가 가능하여 이에 대한 관리가 필요
<hr>

